<!DOCTYPE html> 
<html> 
<head> 
    <title>Profile API<span id="selection-marker-1" class="redactor-selection-marker"></span></title> 

<iframe src="https://giphy.com/embed/MvZKiDJmB1XEs" width="480" height="270" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/oprah-bath-relaxing-MvZKiDJmB1XEs">via GIPHY</a></p>

</head> 
<body> 
    <body style="background-color:#C2DFFF"> </body>
        <font face="verdana"></font>
<h1>Profile API lookup</h1> 
<p>look up your favorite anonymous ID!</p>  
<form name="userinput" onsubmit="identify(event)">
     What is the anonymous ID?
    <input name="anon" required="" size="81" type="text"/> 
    <br><br><br> 
</form> 

</font>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
(function() {
    //'use strict';
    const PROXY_URL = "https://se-personalization-proxy.herokuapp.com"
    const PERSONAS_KEY = "Exrhp9aeSZS-lmd6RFPdZWPntKaMg8WQd-srij72LHGnb3q_82C2nH-7GUKuYI1_LewED7Qh8RTmkFQgUhMpWrQGVvI2YsIavCQJzGNT7W7wsoGek934nHREQBUdT16m4z2OKdzd5xwaSwVmXNvWfBIivmJQZiQK4iWv2KXuaSkRYfCmMefRwa_ABNarfqvZC05Kn_UsWxOy"
    const PERSONAS_WORKSPACE = "spa_1ZfTIhqFilqBN3sYvU4ZN8m2Uf5"

    const anonymous_id="anon"

    function getTraits(anonymous_id, callback) {

        const PersonasTraitURL = "/v1/spaces/spa_1ZfTIhqFilqBN3sYvU4ZN8m2Uf5/collections/users/profiles/anonymous_id:"+anonymous_id+"/traits"

        $.ajax({
            url: PROXY_URL+PersonasTraitURL,
            type: 'GET',
            data: {},
            headers: {
                "Authorization": 'Basic ' + btoa(PERSONAS_KEY+":")
            },
            dataType: 'json',
            success: function (data) {
                console.info(data);
                callback(data["traits"]);
            }
        });
    }

    function drawPersonalization(traits) {
        document.getElementsByClassName("model-container")[0].innerHTML = "<div style='float:left,padding:10px'><img height='100' src="+imgUrl+"?$tray-regular$'/></div><div style='padding:10px'>Click <a href='#'>here</a> to see more items from <strong>Category: " + traits + "</strong>!</div>";
  }

    getTraits(anonymous_id,drawPersonalization)
})();

</script>

            
            
</body> 
</html>

    
